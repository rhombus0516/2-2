<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>lesson02 アニメーション1</title>
  <link rel="stylesheet" type="text/css" href="base.css">
</head>

<body>
  <div id="wrapper">
    <button onclick="reset()">リセット</button>
    <div id="box">
      <p>box</p>
    </div><!-- box -->
  </div><!-- wrapper -->

  <script>
    const element = document.getElementById("box");

    function slideAnimation(element, direction, distance, duration) {
      let position = 0;
      let animationInterval;

      function slide() {
        position += 1;
        if (position < distance) {
          if (direction === "rightdown") {
            element.style.transform = `translate(${position}px, ${position}px)`;
          }
        } else {
          clearInterval(animationInterval);
          element.removeEventListener('click', handleClick);
        }
      }

      animationInterval = setInterval(slide, duration);
    }

    function handleClick() {
      slideAnimation(element, "rightdown", 300, 2);
      element.removeEventListener('click', handleClick);
    }

    element.addEventListener('click', handleClick);

    function reset() {
      element.style.transform = "none";
      element.addEventListener('click', handleClick);
    }

  </script>
</body>

</html>
