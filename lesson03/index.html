<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>lesson03 アニメーション2</title>
  <link rel="stylesheet" type="text/css" href="base.css">
</head>

<body>
  <div id="wrapper">
    <div class="box">
      <button id="button" type="submit">フェードアウト</button>
      <img id="image" src="./images/outsourcing.jpg" alt="サンプル画像">
    </div>
  </div><!-- wrapper -->

  <script>
    const targetElement = document.getElementById("button");
    const image = document.getElementById("image");
    targetElement.style.transition = "opacity 1s";

    button.addEventListener("click", function(){
      if(image.style.display != 'none') {
        fadeOut(image);
        button.textContent = "フェードイン";
      }else{
        fadeIn(image);
        button.textContent = "フェードアウト";
      }
    });

    function fadeIn(element) {
      let opacity = 0;
      element.style.element = 0;
      element.style.display = 'block';

      let fadeInterval = setInterval(function(){
        if(opacity<1){
          opacity += 0.1;
          element.style.opacity = opacity;
        }else{
          clearInterval(fadeInterval);
        }
      }, 50);
    }

    function fadeOut(element) {
        var opacity = 0;
        var fadeOutInterval = setInterval(function() {
            if (opacity > 0) {
                opacity -= 0.1;
                element.style.opacity = opacity;
            } else {
                clearInterval(fadeOutInterval);
                element.style.display = 'none';
            }
        }, 50);
    }
  </script>
</body>

</html>